class brightlink_gesture{constructor(){this.idleActivityTime=2e4,this.minActiveAcceleration=2,this.minActionAcceleration=15,this.permissionStatus={GRANTED:"granted",DENIED:"denied"},this.mobileInActive=!1,this.firstRegister=!0,this.inactiveTimer=null,window.ondevicemotion=null,window.ondeviceorientation=null}getGesturePermission(){this.firstRegister=!0,window.ondevicemotion=null,window.ondeviceorientation=null;let a=new Promise(a=>{/iPad|iPhone|iPod/.test(navigator.userAgent)&&DeviceMotionEvent.requestPermission?this.requestDeviceMotionIOS(a):(this.onGestureEvent(),this.activateMotionEvents(a))});return a}requestDeviceMotionIOS(a){"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(b=>{b===this.permissionStatus.GRANTED?(this.onGestureEvent(),this.activateMotionEvents(a)):a(this.permissionStatus.DENIED)}):this.activateMotionEvents(a)}activateMotionEvents(a){this.resetInactiveTimer(),a(this.permissionStatus.GRANTED)}raiseEvent(a,b){a>this.minActionAcceleration?this.onFlickLeftEvent&&this.onFlickLeftEvent():a<-this.minActionAcceleration?this.onFlickRightEvent&&this.onFlickRightEvent():b>this.minActionAcceleration&&this.onPitchEvent&&this.onPitchEvent()}checkIfDeviceActive(a,b,c){(a>this.minActiveAcceleration||b>this.minActiveAcceleration||c>this.minActiveAcceleration)&&(this.mobileInActive&&(this.onMobileActive&&this.onMobileActive(),this.mobileInActive=!1),this.resetInactiveTimer())}resetInactiveTimer(){this.inactiveTimer&&clearTimeout(this.inactiveTimer),this.inactiveTimer=setTimeout(()=>{clearTimeout(this.inactiveTimer),this.mobileInActive=!0,this.onMobileInActive&&this.onMobileInActive()},this.idleActivityTime)}onGestureEvent(){window.DeviceMotionEvent!=null&&this.firstRegister&&(this.firstRegister=!1,window.ondevicemotion=a=>{var b=Math.round(a.accelerationIncludingGravity.x),c=Math.round(a.accelerationIncludingGravity.y),d=Math.round(a.accelerationIncludingGravity.z);this.raiseEvent(b,d),this.checkIfDeviceActive(b,c,d)})}}window.GESTURE=new brightlink_gesture,module.exports={gesture:window.GESTURE};